/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_app";
exports.ids = ["pages/_app"];
exports.modules = {

/***/ "(pages-dir-node)/./src/lib/auth.js":
/*!*************************!*\
  !*** ./src/lib/auth.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Authenticator: () => (/* binding */ Authenticator),\n/* harmony export */   fillContext: () => (/* binding */ fillContext),\n/* harmony export */   updateContext: () => (/* binding */ updateContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"(pages-dir-node)/./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./supabase */ \"(pages-dir-node)/./src/lib/supabase.js\");\n\n\n\n\n// Create context for authentication\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\nfunction Authenticator({ children, context }) {\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    // Check for authentication on mount and auth changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Authenticator.useEffect\": ()=>{\n            // Get initial session\n            const getInitialSession = {\n                \"Authenticator.useEffect.getInitialSession\": async ()=>{\n                    const { data: { session } } = await _supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getSession();\n                    if (session?.user) {\n                        const profile = await _supabase__WEBPACK_IMPORTED_MODULE_3__.dataService.getUserProfile(session.user.id);\n                        const name = profile?.name || session.user.email;\n                        setUser({\n                            id: session.user.id,\n                            email: session.user.email,\n                            name\n                        });\n                        await _supabase__WEBPACK_IMPORTED_MODULE_3__.dataService.upsertClient({\n                            id: session.user.id,\n                            email: session.user.email,\n                            name\n                        });\n                        if (session.access_token && name) {\n                            fetch('/api/backfill-schedule-name', {\n                                method: 'POST',\n                                headers: {\n                                    Authorization: `Bearer ${session.access_token}`,\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    name\n                                })\n                            }).catch({\n                                \"Authenticator.useEffect.getInitialSession\": ()=>{}\n                            }[\"Authenticator.useEffect.getInitialSession\"]);\n                        }\n                    }\n                    setLoading(false);\n                }\n            }[\"Authenticator.useEffect.getInitialSession\"];\n            getInitialSession();\n            // Listen for auth changes\n            const { data: { subscription } } = _supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.onAuthStateChange({\n                \"Authenticator.useEffect\": async (event, session)=>{\n                    if (session?.user) {\n                        const profile = await _supabase__WEBPACK_IMPORTED_MODULE_3__.dataService.getUserProfile(session.user.id);\n                        const name = profile?.name || session.user.email;\n                        setUser({\n                            id: session.user.id,\n                            email: session.user.email,\n                            name\n                        });\n                        await _supabase__WEBPACK_IMPORTED_MODULE_3__.dataService.upsertClient({\n                            id: session.user.id,\n                            email: session.user.email,\n                            name\n                        });\n                        if (session.access_token && name) {\n                            fetch('/api/backfill-schedule-name', {\n                                method: 'POST',\n                                headers: {\n                                    Authorization: `Bearer ${session.access_token}`,\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    name\n                                })\n                            }).catch({\n                                \"Authenticator.useEffect\": ()=>{}\n                            }[\"Authenticator.useEffect\"]);\n                        }\n                    } else {\n                        setUser(null);\n                    }\n                    setLoading(false);\n                }\n            }[\"Authenticator.useEffect\"]);\n            return ({\n                \"Authenticator.useEffect\": ()=>subscription.unsubscribe()\n            })[\"Authenticator.useEffect\"];\n        }\n    }[\"Authenticator.useEffect\"], []);\n    // Login with Google using our domain only (no redirect to supabase.co).\n    // Call this with the id_token from Google Identity Services callback.\n    const signInWithGoogleIdToken = async (idToken)=>{\n        try {\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.signInWithIdToken({\n                provider: 'google',\n                token: idToken\n            });\n            if (error) {\n                return {\n                    error: error.message\n                };\n            }\n            if (data?.session?.user) {\n                const u = data.session.user;\n                const nameFromMeta = u.user_metadata?.full_name || u.user_metadata?.name;\n                setUser({\n                    id: u.id,\n                    email: u.email,\n                    name: nameFromMeta || u.email\n                });\n                setLoading(false);\n                // Run profile + clients sync in background so login modal closes immediately\n                (async ()=>{\n                    try {\n                        const profile = await _supabase__WEBPACK_IMPORTED_MODULE_3__.dataService.getUserProfile(u.id);\n                        const name = profile?.name || nameFromMeta || u.email;\n                        setUser((prev)=>prev ? {\n                                ...prev,\n                                name\n                            } : null);\n                        await _supabase__WEBPACK_IMPORTED_MODULE_3__.dataService.upsertClient({\n                            id: u.id,\n                            email: u.email,\n                            name\n                        });\n                        const { data: { session } } = await _supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.getSession();\n                        if (session?.access_token && name) {\n                            fetch('/api/backfill-schedule-name', {\n                                method: 'POST',\n                                headers: {\n                                    Authorization: `Bearer ${session.access_token}`,\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    name\n                                })\n                            }).catch(()=>{});\n                        }\n                    } catch (e) {\n                        console.error('Post-login sync:', e);\n                    }\n                })();\n                return {\n                    success: true\n                };\n            }\n            setLoading(false);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error('Google sign-in error:', error);\n            setLoading(false);\n            return {\n                error: error.message || 'An unexpected error occurred'\n            };\n        }\n    };\n    // Legacy OAuth redirect (not used for Google when using signInWithGoogleIdToken)\n    const loginWithProvider = async (provider)=>{\n        if (provider === 'google') {\n            return {\n                error: 'Use the Google button above to sign in.'\n            };\n        }\n        try {\n            const redirectTo =  false ? 0 : `${\"http://localhost:4200\" || 0}/auth/callback`;\n            const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.signInWithOAuth({\n                provider,\n                options: {\n                    redirectTo\n                }\n            });\n            if (error) return {\n                error: error.message\n            };\n            if (data?.url) {\n                window.location.href = data.url;\n                return {\n                    success: true\n                };\n            }\n            return {\n                error: 'Could not start sign-in'\n            };\n        } catch (error) {\n            console.error('Login error:', error);\n            return {\n                error: 'An unexpected error occurred'\n            };\n        }\n    };\n    // Logout function\n    const logout = async ()=>{\n        try {\n            await _supabase__WEBPACK_IMPORTED_MODULE_3__.supabase.auth.signOut();\n            setUser(null);\n            // Route to Home\n            if (router.pathname !== '/') {\n                router.replace('/');\n            }\n        } catch (error) {\n            console.error('Logout error:', error);\n        }\n    };\n    // Application context is user dependent\n    const authContextValue = {\n        user,\n        loginWithProvider,\n        signInWithGoogleIdToken,\n        logout,\n        loading,\n        context\n    };\n    // Authorize and return the updated context\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: authContextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Cursor Coding\\\\Tutoring Web Application\\\\gregtutors\\\\src\\\\lib\\\\auth.js\",\n        lineNumber: 184,\n        columnNumber: 5\n    }, this);\n}\n// Hook passed directly above, refresh authentication and use it to perform an action\nfunction updateContext() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (context === undefined) {\n        throw new Error('updateContext must be used within an Authenticator');\n    }\n    return context;\n}\n// Helper for interacting with local authentication\nasync function fillContext(context) {\n    try {\n        // For server-side rendering, we need to check if there's a session\n        // This is a simplified version - in production you'd want to verify the session server-side\n        return {\n            user: null\n        };\n    } catch (error) {\n        console.error('Auth validation error:', error);\n        return {\n            user: null\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTBCQTtRQUN4QyxPQUFPO1lBQUUvQixNQUFNO1FBQUs7SUFDdEI7QUFDRiIsInNvdXJjZXMiOlsiQzpcXEN1cnNvciBDb2RpbmdcXFR1dG9yaW5nIFdlYiBBcHBsaWNhdGlvblxcZ3JlZ3R1dG9yc1xcc3JjXFxsaWJcXGF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xyXG5pbXBvcnQgeyBzdXBhYmFzZSwgZGF0YVNlcnZpY2UgfSBmcm9tICcuL3N1cGFiYXNlJztcclxuXHJcbi8vIENyZWF0ZSBjb250ZXh0IGZvciBhdXRoZW50aWNhdGlvblxyXG5jb25zdCBBdXRoQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBdXRoZW50aWNhdG9yKHsgY2hpbGRyZW4sIGNvbnRleHQgfSkge1xyXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xyXG5cclxuICAvLyBDaGVjayBmb3IgYXV0aGVudGljYXRpb24gb24gbW91bnQgYW5kIGF1dGggY2hhbmdlc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBHZXQgaW5pdGlhbCBzZXNzaW9uXHJcbiAgICBjb25zdCBnZXRJbml0aWFsU2Vzc2lvbiA9IGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCBkYXRhU2VydmljZS5nZXRVc2VyUHJvZmlsZShzZXNzaW9uLnVzZXIuaWQpO1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSBwcm9maWxlPy5uYW1lIHx8IHNlc3Npb24udXNlci5lbWFpbDtcclxuICAgICAgICBzZXRVc2VyKHtcclxuICAgICAgICAgIGlkOiBzZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICBlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsLFxyXG4gICAgICAgICAgbmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IGRhdGFTZXJ2aWNlLnVwc2VydENsaWVudCh7XHJcbiAgICAgICAgICBpZDogc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbCxcclxuICAgICAgICAgIG5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoc2Vzc2lvbi5hY2Nlc3NfdG9rZW4gJiYgbmFtZSkge1xyXG4gICAgICAgICAgZmV0Y2goJy9hcGkvYmFja2ZpbGwtc2NoZWR1bGUtbmFtZScsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Nlc3Npb24uYWNjZXNzX3Rva2VufWAsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lIH0pXHJcbiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICBnZXRJbml0aWFsU2Vzc2lvbigpO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgYXV0aCBjaGFuZ2VzXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgc3Vic2NyaXB0aW9uIH0gfSA9IHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoXHJcbiAgICAgIGFzeW5jIChldmVudCwgc2Vzc2lvbikgPT4ge1xyXG4gICAgICAgIGlmIChzZXNzaW9uPy51c2VyKSB7XHJcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gYXdhaXQgZGF0YVNlcnZpY2UuZ2V0VXNlclByb2ZpbGUoc2Vzc2lvbi51c2VyLmlkKTtcclxuICAgICAgICAgIGNvbnN0IG5hbWUgPSBwcm9maWxlPy5uYW1lIHx8IHNlc3Npb24udXNlci5lbWFpbDtcclxuICAgICAgICAgIHNldFVzZXIoe1xyXG4gICAgICAgICAgICBpZDogc2Vzc2lvbi51c2VyLmlkLFxyXG4gICAgICAgICAgICBlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsLFxyXG4gICAgICAgICAgICBuYW1lXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGF3YWl0IGRhdGFTZXJ2aWNlLnVwc2VydENsaWVudCh7XHJcbiAgICAgICAgICAgIGlkOiBzZXNzaW9uLnVzZXIuaWQsXHJcbiAgICAgICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwsXHJcbiAgICAgICAgICAgIG5hbWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYgKHNlc3Npb24uYWNjZXNzX3Rva2VuICYmIG5hbWUpIHtcclxuICAgICAgICAgICAgZmV0Y2goJy9hcGkvYmFja2ZpbGwtc2NoZWR1bGUtbmFtZScsIHtcclxuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtzZXNzaW9uLmFjY2Vzc190b2tlbn1gLCAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXHJcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lIH0pXHJcbiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gTG9naW4gd2l0aCBHb29nbGUgdXNpbmcgb3VyIGRvbWFpbiBvbmx5IChubyByZWRpcmVjdCB0byBzdXBhYmFzZS5jbykuXHJcbiAgLy8gQ2FsbCB0aGlzIHdpdGggdGhlIGlkX3Rva2VuIGZyb20gR29vZ2xlIElkZW50aXR5IFNlcnZpY2VzIGNhbGxiYWNrLlxyXG4gIGNvbnN0IHNpZ25JbldpdGhHb29nbGVJZFRva2VuID0gYXN5bmMgKGlkVG9rZW4pID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aElkVG9rZW4oe1xyXG4gICAgICAgIHByb3ZpZGVyOiAnZ29vZ2xlJyxcclxuICAgICAgICB0b2tlbjogaWRUb2tlbixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4geyBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZGF0YT8uc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICAgIGNvbnN0IHUgPSBkYXRhLnNlc3Npb24udXNlcjtcclxuICAgICAgICBjb25zdCBuYW1lRnJvbU1ldGEgPSB1LnVzZXJfbWV0YWRhdGE/LmZ1bGxfbmFtZSB8fCB1LnVzZXJfbWV0YWRhdGE/Lm5hbWU7XHJcbiAgICAgICAgc2V0VXNlcih7XHJcbiAgICAgICAgICBpZDogdS5pZCxcclxuICAgICAgICAgIGVtYWlsOiB1LmVtYWlsLFxyXG4gICAgICAgICAgbmFtZTogbmFtZUZyb21NZXRhIHx8IHUuZW1haWwsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgLy8gUnVuIHByb2ZpbGUgKyBjbGllbnRzIHN5bmMgaW4gYmFja2dyb3VuZCBzbyBsb2dpbiBtb2RhbCBjbG9zZXMgaW1tZWRpYXRlbHlcclxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGRhdGFTZXJ2aWNlLmdldFVzZXJQcm9maWxlKHUuaWQpO1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcHJvZmlsZT8ubmFtZSB8fCBuYW1lRnJvbU1ldGEgfHwgdS5lbWFpbDtcclxuICAgICAgICAgICAgc2V0VXNlcigocHJldikgPT4gKHByZXYgPyB7IC4uLnByZXYsIG5hbWUgfSA6IG51bGwpKTtcclxuICAgICAgICAgICAgYXdhaXQgZGF0YVNlcnZpY2UudXBzZXJ0Q2xpZW50KHsgaWQ6IHUuaWQsIGVtYWlsOiB1LmVtYWlsLCBuYW1lIH0pO1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgICAgICAgICAgaWYgKHNlc3Npb24/LmFjY2Vzc190b2tlbiAmJiBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgZmV0Y2goJy9hcGkvYmFja2ZpbGwtc2NoZWR1bGUtbmFtZScsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7c2Vzc2lvbi5hY2Nlc3NfdG9rZW59YCwgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lIH0pXHJcbiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Bvc3QtbG9naW4gc3luYzonLCBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcclxuICAgICAgfVxyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignR29vZ2xlIHNpZ24taW4gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQnIH07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTGVnYWN5IE9BdXRoIHJlZGlyZWN0IChub3QgdXNlZCBmb3IgR29vZ2xlIHdoZW4gdXNpbmcgc2lnbkluV2l0aEdvb2dsZUlkVG9rZW4pXHJcbiAgY29uc3QgbG9naW5XaXRoUHJvdmlkZXIgPSBhc3luYyAocHJvdmlkZXIpID0+IHtcclxuICAgIGlmIChwcm92aWRlciA9PT0gJ2dvb2dsZScpIHtcclxuICAgICAgcmV0dXJuIHsgZXJyb3I6ICdVc2UgdGhlIEdvb2dsZSBidXR0b24gYWJvdmUgdG8gc2lnbiBpbi4nIH07XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZWRpcmVjdFRvID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICA/IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59L2F1dGgvY2FsbGJhY2tgXHJcbiAgICAgICAgOiBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TSVRFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo0MjAwJ30vYXV0aC9jYWxsYmFja2A7XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhPQXV0aCh7XHJcbiAgICAgICAgcHJvdmlkZXIsXHJcbiAgICAgICAgb3B0aW9uczogeyByZWRpcmVjdFRvIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSByZXR1cm4geyBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xyXG4gICAgICBpZiAoZGF0YT8udXJsKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBkYXRhLnVybDtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgZXJyb3I6ICdDb3VsZCBub3Qgc3RhcnQgc2lnbi1pbicgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvZ2luIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHsgZXJyb3I6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyB9O1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIExvZ291dCBmdW5jdGlvblxyXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpO1xyXG4gICAgICBzZXRVc2VyKG51bGwpO1xyXG4gICAgICBcclxuICAgICAgLy8gUm91dGUgdG8gSG9tZVxyXG4gICAgICBpZiAocm91dGVyLnBhdGhuYW1lICE9PSAnLycpIHtcclxuICAgICAgICByb3V0ZXIucmVwbGFjZSgnLycpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdMb2dvdXQgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEFwcGxpY2F0aW9uIGNvbnRleHQgaXMgdXNlciBkZXBlbmRlbnRcclxuICBjb25zdCBhdXRoQ29udGV4dFZhbHVlID0ge1xyXG4gICAgdXNlcixcclxuICAgIGxvZ2luV2l0aFByb3ZpZGVyLFxyXG4gICAgc2lnbkluV2l0aEdvb2dsZUlkVG9rZW4sXHJcbiAgICBsb2dvdXQsXHJcbiAgICBsb2FkaW5nLFxyXG4gICAgY29udGV4dFxyXG4gIH07XHJcblxyXG4gIC8vIEF1dGhvcml6ZSBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIGNvbnRleHRcclxuICByZXR1cm4gKFxyXG4gICAgPEF1dGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXthdXRoQ29udGV4dFZhbHVlfT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9BdXRoQ29udGV4dC5Qcm92aWRlcj5cclxuICApO1xyXG59XHJcblxyXG4vLyBIb29rIHBhc3NlZCBkaXJlY3RseSBhYm92ZSwgcmVmcmVzaCBhdXRoZW50aWNhdGlvbiBhbmQgdXNlIGl0IHRvIHBlcmZvcm0gYW4gYWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDb250ZXh0KCkge1xyXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcclxuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VwZGF0ZUNvbnRleHQgbXVzdCBiZSB1c2VkIHdpdGhpbiBhbiBBdXRoZW50aWNhdG9yJyk7XHJcbiAgfVxyXG4gIHJldHVybiBjb250ZXh0O1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZm9yIGludGVyYWN0aW5nIHdpdGggbG9jYWwgYXV0aGVudGljYXRpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGxDb250ZXh0KGNvbnRleHQpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZywgd2UgbmVlZCB0byBjaGVjayBpZiB0aGVyZSdzIGEgc2Vzc2lvblxyXG4gICAgLy8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgdmVyc2lvbiAtIGluIHByb2R1Y3Rpb24geW91J2Qgd2FudCB0byB2ZXJpZnkgdGhlIHNlc3Npb24gc2VydmVyLXNpZGVcclxuICAgIHJldHVybiB7IHVzZXI6IG51bGwgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQXV0aCB2YWxpZGF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiB7IHVzZXI6IG51bGwgfTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZVJvdXRlciIsInN1cGFiYXNlIiwiZGF0YVNlcnZpY2UiLCJBdXRoQ29udGV4dCIsIkF1dGhlbnRpY2F0b3IiLCJjaGlsZHJlbiIsImNvbnRleHQiLCJ1c2VyIiwic2V0VXNlciIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwicm91dGVyIiwiZ2V0SW5pdGlhbFNlc3Npb24iLCJkYXRhIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwicHJvZmlsZSIsImdldFVzZXJQcm9maWxlIiwiaWQiLCJuYW1lIiwiZW1haWwiLCJ1cHNlcnRDbGllbnQiLCJhY2Nlc3NfdG9rZW4iLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXRjaCIsInN1YnNjcmlwdGlvbiIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJ1bnN1YnNjcmliZSIsInNpZ25JbldpdGhHb29nbGVJZFRva2VuIiwiaWRUb2tlbiIsImVycm9yIiwic2lnbkluV2l0aElkVG9rZW4iLCJwcm92aWRlciIsInRva2VuIiwibWVzc2FnZSIsInUiLCJuYW1lRnJvbU1ldGEiLCJ1c2VyX21ldGFkYXRhIiwiZnVsbF9uYW1lIiwicHJldiIsImUiLCJjb25zb2xlIiwic3VjY2VzcyIsImxvZ2luV2l0aFByb3ZpZGVyIiwicmVkaXJlY3RUbyIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NJVEVfVVJMIiwic2lnbkluV2l0aE9BdXRoIiwib3B0aW9ucyIsInVybCIsImhyZWYiLCJsb2dvdXQiLCJzaWduT3V0IiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiYXV0aENvbnRleHRWYWx1ZSIsIlByb3ZpZGVyIiwidmFsdWUiLCJ1cGRhdGVDb250ZXh0IiwidW5kZWZpbmVkIiwiRXJyb3IiLCJmaWxsQ29udGV4dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/lib/auth.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/lib/supabase.js":
/*!*****************************!*\
  !*** ./src/lib/supabase.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dataService: () => (/* binding */ dataService),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://astwxcworcwrbwemltgf.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzdHd4Y3dvcmN3cmJ3ZW1sdGdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEwMjc4NDEsImV4cCI6MjA4NjYwMzg0MX0.i3DNUhecrB2Q8xcIewTrZk9aaVIFhfhveDT2YVF9_l0\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase environment variables');\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Helper functions for data fetching\nconst dataService = {\n    // Fetch reviews\n    async getReviews (count = 3) {\n        try {\n            const { data, error } = await supabase.from('reviews').select('quote, client').eq('is_active', true).limit(count);\n            if (error) {\n                console.error('Error fetching reviews:', error);\n                return [];\n            }\n            return data || [];\n        } catch (error) {\n            console.error('Error fetching reviews:', error);\n            return [];\n        }\n    },\n    // Fetch quotes\n    async getQuotes (count = 3) {\n        try {\n            const { data, error } = await supabase.from('quotes').select('text, author').eq('is_active', true).limit(count);\n            if (error) {\n                console.error('Error fetching quotes:', error);\n                return [];\n            }\n            return data || [];\n        } catch (error) {\n            console.error('Error fetching quotes:', error);\n            return [];\n        }\n    },\n    // Get user profile\n    async getUserProfile (userId) {\n        try {\n            const { data, error } = await supabase.from('profiles').select('*').eq('id', userId).single();\n            if (error) {\n                console.error('Error fetching user profile:', error);\n                return null;\n            }\n            return data;\n        } catch (error) {\n            console.error('Error fetching user profile:', error);\n            return null;\n        }\n    },\n    // Get schedule access for user\n    async getScheduleAccess (userId) {\n        try {\n            const { data, error } = await supabase.from('profiles').select('has_schedule_access').eq('id', userId).single();\n            if (error) {\n                console.error('Error fetching schedule access:', error);\n                return false;\n            }\n            return data?.has_schedule_access || false;\n        } catch (error) {\n            console.error('Error fetching schedule access:', error);\n            return false;\n        }\n    },\n    // Upsert current user into clients by email. If row exists (e.g. admin-added), set auth_user_id and update name to OAuth name.\n    async upsertClient ({ id, email, name }) {\n        if (!id || !email) return;\n        try {\n            await supabase.from('clients').upsert({\n                email,\n                name: name || email,\n                auth_user_id: id,\n                updated_at: new Date().toISOString()\n            }, {\n                onConflict: 'email'\n            });\n        } catch (error) {\n            console.error('Error upserting client:', error);\n        }\n    },\n    // Schedule events: returns rows (one-off and recurring). If userEmail is provided and the table has user_email, only that user's events are returned.\n    async getScheduleEvents (userEmail = null) {\n        const baseSelect = 'id, title, category, start_time, end_time, date, day_of_week, is_recurring, recurrence_interval, recurrence_end_date, created_at';\n        try {\n            let query = supabase.from('schedule_events').select(baseSelect + ', user_email').order('created_at', {\n                ascending: true\n            });\n            if (userEmail) {\n                query = query.eq('user_email', userEmail);\n            }\n            const { data, error } = await query;\n            if (error) {\n                if (error.code === '42703') {\n                    // column may be missing (user_email, recurrence_interval, or created_at) â€” retry with minimal set\n                    const fallbackSelect = 'id, title, category, start_time, end_time, date, day_of_week, is_recurring';\n                    const fallback = await supabase.from('schedule_events').select(fallbackSelect).order('created_at', {\n                        ascending: true\n                    });\n                    if (fallback.error) {\n                        console.error('Error fetching schedule events:', fallback.error);\n                        return [];\n                    }\n                    return fallback.data || [];\n                }\n                console.error('Error fetching schedule events:', error);\n                return [];\n            }\n            return data || [];\n        } catch (error) {\n            console.error('Error fetching schedule events:', error);\n            return [];\n        }\n    },\n    async createScheduleEvent ({ title, date, start, end, cat, user_email: userEmail, is_recurring, day_of_week, recurrence_interval }) {\n        try {\n            const row = {\n                title,\n                category: cat,\n                start_time: start + (start.length === 5 ? ':00' : ''),\n                end_time: end + (end.length === 5 ? ':00' : ''),\n                date: is_recurring ? null : date,\n                is_recurring: !!is_recurring\n            };\n            if (userEmail != null && userEmail !== '') row.user_email = userEmail;\n            if (is_recurring && day_of_week != null) row.day_of_week = Number(day_of_week);\n            if (is_recurring && (recurrence_interval === 1 || recurrence_interval === 2)) row.recurrence_interval = recurrence_interval;\n            let result = await supabase.from('schedule_events').insert(row).select('id, title, category, start_time, end_time, date').single();\n            if (result.error && result.error.code === '42703') {\n                delete row.user_email;\n                if (row.recurrence_interval !== undefined) delete row.recurrence_interval;\n                if (row.day_of_week !== undefined) delete row.day_of_week;\n                result = await supabase.from('schedule_events').insert(row).select('id, title, category, start_time, end_time, date').single();\n            }\n            if (result.error) {\n                console.error('Schedule event insert error:', result.error.message, result.error.details);\n                throw result.error;\n            }\n            return result.data;\n        } catch (error) {\n            console.error('Error creating schedule event:', error);\n            return null;\n        }\n    },\n    async updateScheduleEvent (id, { title, date, start, end, cat, is_recurring, day_of_week, recurrence_interval, recurrence_end_date }) {\n        try {\n            const payload = {\n                title,\n                category: cat\n            };\n            if (date != null) payload.date = date;\n            if (start != null) payload.start_time = start.length === 5 ? start + ':00' : start;\n            if (end != null) payload.end_time = end.length === 5 ? end + ':00' : end;\n            if (is_recurring != null) payload.is_recurring = is_recurring;\n            if (day_of_week != null) payload.day_of_week = day_of_week;\n            if (recurrence_interval != null) payload.recurrence_interval = recurrence_interval;\n            if (recurrence_end_date !== undefined) payload.recurrence_end_date = recurrence_end_date || null;\n            const { data, error } = await supabase.from('schedule_events').update(payload).eq('id', id).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error updating schedule event:', error);\n            return null;\n        }\n    },\n    async deleteScheduleEvent (id) {\n        try {\n            const { error } = await supabase.from('schedule_events').delete().eq('id', id);\n            if (error) throw error;\n            return true;\n        } catch (error) {\n            console.error('Error deleting schedule event:', error);\n            return false;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SVQsT0FBTyxNQUFNQTtZQUNqQixPQUFPRDtRQUNULEVBQUUsT0FBT0MsT0FBTztZQUNkSyxRQUFRTCxLQUFLLENBQUMsa0NBQWtDQTtZQUNoRCxPQUFPO1FBQ1Q7SUFDRjtJQUVBLE1BQU13RCxxQkFBb0IzQyxFQUFFO1FBQzFCLElBQUk7WUFDRixNQUFNLEVBQUViLEtBQUssRUFBRSxHQUFHLE1BQU1MLFNBQVNNLElBQUksQ0FBQyxtQkFBbUJ3RCxNQUFNLEdBQUd0RCxFQUFFLENBQUMsTUFBTVU7WUFDM0UsSUFBSWIsT0FBTyxNQUFNQTtZQUNqQixPQUFPO1FBQ1QsRUFBRSxPQUFPQSxPQUFPO1lBQ2RLLFFBQVFMLEtBQUssQ0FBQyxrQ0FBa0NBO1lBQ2hELE9BQU87UUFDVDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXEN1cnNvciBDb2RpbmdcXFR1dG9yaW5nIFdlYiBBcHBsaWNhdGlvblxcZ3JlZ3R1dG9yc1xcc3JjXFxsaWJcXHN1cGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGRhdGEgZmV0Y2hpbmdcclxuZXhwb3J0IGNvbnN0IGRhdGFTZXJ2aWNlID0ge1xyXG4gIC8vIEZldGNoIHJldmlld3NcclxuICBhc3luYyBnZXRSZXZpZXdzKGNvdW50ID0gMykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncmV2aWV3cycpXHJcbiAgICAgICAgLnNlbGVjdCgncXVvdGUsIGNsaWVudCcpXHJcbiAgICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxyXG4gICAgICAgIC5saW1pdChjb3VudCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByZXZpZXdzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcmV2aWV3czonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvLyBGZXRjaCBxdW90ZXNcclxuICBhc3luYyBnZXRRdW90ZXMoY291bnQgPSAzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdxdW90ZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ3RleHQsIGF1dGhvcicpXHJcbiAgICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxyXG4gICAgICAgIC5saW1pdChjb3VudCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBxdW90ZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBxdW90ZXM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLy8gR2V0IHVzZXIgcHJvZmlsZVxyXG4gIGFzeW5jIGdldFVzZXJQcm9maWxlKHVzZXJJZCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwcm9maWxlOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIHByb2ZpbGU6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvLyBHZXQgc2NoZWR1bGUgYWNjZXNzIGZvciB1c2VyXHJcbiAgYXN5bmMgZ2V0U2NoZWR1bGVBY2Nlc3ModXNlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAgICAgLnNlbGVjdCgnaGFzX3NjaGVkdWxlX2FjY2VzcycpXHJcbiAgICAgICAgLmVxKCdpZCcsIHVzZXJJZClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzY2hlZHVsZSBhY2Nlc3M6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGE/Lmhhc19zY2hlZHVsZV9hY2Nlc3MgfHwgZmFsc2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzY2hlZHVsZSBhY2Nlc3M6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLy8gVXBzZXJ0IGN1cnJlbnQgdXNlciBpbnRvIGNsaWVudHMgYnkgZW1haWwuIElmIHJvdyBleGlzdHMgKGUuZy4gYWRtaW4tYWRkZWQpLCBzZXQgYXV0aF91c2VyX2lkIGFuZCB1cGRhdGUgbmFtZSB0byBPQXV0aCBuYW1lLlxyXG4gIGFzeW5jIHVwc2VydENsaWVudCh7IGlkLCBlbWFpbCwgbmFtZSB9KSB7XHJcbiAgICBpZiAoIWlkIHx8ICFlbWFpbCkgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnY2xpZW50cycpXHJcbiAgICAgICAgLnVwc2VydChcclxuICAgICAgICAgIHsgZW1haWwsIG5hbWU6IG5hbWUgfHwgZW1haWwsIGF1dGhfdXNlcl9pZDogaWQsIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9LFxyXG4gICAgICAgICAgeyBvbkNvbmZsaWN0OiAnZW1haWwnIH1cclxuICAgICAgICApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBzZXJ0aW5nIGNsaWVudDonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLy8gU2NoZWR1bGUgZXZlbnRzOiByZXR1cm5zIHJvd3MgKG9uZS1vZmYgYW5kIHJlY3VycmluZykuIElmIHVzZXJFbWFpbCBpcyBwcm92aWRlZCBhbmQgdGhlIHRhYmxlIGhhcyB1c2VyX2VtYWlsLCBvbmx5IHRoYXQgdXNlcidzIGV2ZW50cyBhcmUgcmV0dXJuZWQuXHJcbiAgYXN5bmMgZ2V0U2NoZWR1bGVFdmVudHModXNlckVtYWlsID0gbnVsbCkge1xyXG4gICAgY29uc3QgYmFzZVNlbGVjdCA9ICdpZCwgdGl0bGUsIGNhdGVnb3J5LCBzdGFydF90aW1lLCBlbmRfdGltZSwgZGF0ZSwgZGF5X29mX3dlZWssIGlzX3JlY3VycmluZywgcmVjdXJyZW5jZV9pbnRlcnZhbCwgcmVjdXJyZW5jZV9lbmRfZGF0ZSwgY3JlYXRlZF9hdCc7XHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdzY2hlZHVsZV9ldmVudHMnKVxyXG4gICAgICAgIC5zZWxlY3QoYmFzZVNlbGVjdCArICcsIHVzZXJfZW1haWwnKVxyXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xyXG5cclxuICAgICAgaWYgKHVzZXJFbWFpbCkge1xyXG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ3VzZXJfZW1haWwnLCB1c2VyRW1haWwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnNDI3MDMnKSB7XHJcbiAgICAgICAgICAvLyBjb2x1bW4gbWF5IGJlIG1pc3NpbmcgKHVzZXJfZW1haWwsIHJlY3VycmVuY2VfaW50ZXJ2YWwsIG9yIGNyZWF0ZWRfYXQpIOKAlCByZXRyeSB3aXRoIG1pbmltYWwgc2V0XHJcbiAgICAgICAgICBjb25zdCBmYWxsYmFja1NlbGVjdCA9ICdpZCwgdGl0bGUsIGNhdGVnb3J5LCBzdGFydF90aW1lLCBlbmRfdGltZSwgZGF0ZSwgZGF5X29mX3dlZWssIGlzX3JlY3VycmluZyc7XHJcbiAgICAgICAgICBjb25zdCBmYWxsYmFjayA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdzY2hlZHVsZV9ldmVudHMnKVxyXG4gICAgICAgICAgICAuc2VsZWN0KGZhbGxiYWNrU2VsZWN0KVxyXG4gICAgICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcclxuICAgICAgICAgIGlmIChmYWxsYmFjay5lcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzY2hlZHVsZSBldmVudHM6JywgZmFsbGJhY2suZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsbGJhY2suZGF0YSB8fCBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2NoZWR1bGUgZXZlbnRzOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzY2hlZHVsZSBldmVudHM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgYXN5bmMgY3JlYXRlU2NoZWR1bGVFdmVudCh7IHRpdGxlLCBkYXRlLCBzdGFydCwgZW5kLCBjYXQsIHVzZXJfZW1haWw6IHVzZXJFbWFpbCwgaXNfcmVjdXJyaW5nLCBkYXlfb2Zfd2VlaywgcmVjdXJyZW5jZV9pbnRlcnZhbCB9KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByb3cgPSB7XHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgY2F0ZWdvcnk6IGNhdCxcclxuICAgICAgICBzdGFydF90aW1lOiBzdGFydCArIChzdGFydC5sZW5ndGggPT09IDUgPyAnOjAwJyA6ICcnKSxcclxuICAgICAgICBlbmRfdGltZTogZW5kICsgKGVuZC5sZW5ndGggPT09IDUgPyAnOjAwJyA6ICcnKSxcclxuICAgICAgICBkYXRlOiBpc19yZWN1cnJpbmcgPyBudWxsIDogZGF0ZSxcclxuICAgICAgICBpc19yZWN1cnJpbmc6ICEhaXNfcmVjdXJyaW5nXHJcbiAgICAgIH07XHJcbiAgICAgIGlmICh1c2VyRW1haWwgIT0gbnVsbCAmJiB1c2VyRW1haWwgIT09ICcnKSByb3cudXNlcl9lbWFpbCA9IHVzZXJFbWFpbDtcclxuICAgICAgaWYgKGlzX3JlY3VycmluZyAmJiBkYXlfb2Zfd2VlayAhPSBudWxsKSByb3cuZGF5X29mX3dlZWsgPSBOdW1iZXIoZGF5X29mX3dlZWspO1xyXG4gICAgICBpZiAoaXNfcmVjdXJyaW5nICYmIChyZWN1cnJlbmNlX2ludGVydmFsID09PSAxIHx8IHJlY3VycmVuY2VfaW50ZXJ2YWwgPT09IDIpKSByb3cucmVjdXJyZW5jZV9pbnRlcnZhbCA9IHJlY3VycmVuY2VfaW50ZXJ2YWw7XHJcblxyXG4gICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnc2NoZWR1bGVfZXZlbnRzJylcclxuICAgICAgICAuaW5zZXJ0KHJvdylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgdGl0bGUsIGNhdGVnb3J5LCBzdGFydF90aW1lLCBlbmRfdGltZSwgZGF0ZScpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKHJlc3VsdC5lcnJvciAmJiByZXN1bHQuZXJyb3IuY29kZSA9PT0gJzQyNzAzJykge1xyXG4gICAgICAgIGRlbGV0ZSByb3cudXNlcl9lbWFpbDtcclxuICAgICAgICBpZiAocm93LnJlY3VycmVuY2VfaW50ZXJ2YWwgIT09IHVuZGVmaW5lZCkgZGVsZXRlIHJvdy5yZWN1cnJlbmNlX2ludGVydmFsO1xyXG4gICAgICAgIGlmIChyb3cuZGF5X29mX3dlZWsgIT09IHVuZGVmaW5lZCkgZGVsZXRlIHJvdy5kYXlfb2Zfd2VlaztcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ3NjaGVkdWxlX2V2ZW50cycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHJvdylcclxuICAgICAgICAgIC5zZWxlY3QoJ2lkLCB0aXRsZSwgY2F0ZWdvcnksIHN0YXJ0X3RpbWUsIGVuZF90aW1lLCBkYXRlJylcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmVzdWx0LmVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU2NoZWR1bGUgZXZlbnQgaW5zZXJ0IGVycm9yOicsIHJlc3VsdC5lcnJvci5tZXNzYWdlLCByZXN1bHQuZXJyb3IuZGV0YWlscyk7XHJcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHNjaGVkdWxlIGV2ZW50OicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgYXN5bmMgdXBkYXRlU2NoZWR1bGVFdmVudChpZCwgeyB0aXRsZSwgZGF0ZSwgc3RhcnQsIGVuZCwgY2F0LCBpc19yZWN1cnJpbmcsIGRheV9vZl93ZWVrLCByZWN1cnJlbmNlX2ludGVydmFsLCByZWN1cnJlbmNlX2VuZF9kYXRlIH0pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IHRpdGxlLCBjYXRlZ29yeTogY2F0IH07XHJcbiAgICAgIGlmIChkYXRlICE9IG51bGwpIHBheWxvYWQuZGF0ZSA9IGRhdGU7XHJcbiAgICAgIGlmIChzdGFydCAhPSBudWxsKSBwYXlsb2FkLnN0YXJ0X3RpbWUgPSBzdGFydC5sZW5ndGggPT09IDUgPyBzdGFydCArICc6MDAnIDogc3RhcnQ7XHJcbiAgICAgIGlmIChlbmQgIT0gbnVsbCkgcGF5bG9hZC5lbmRfdGltZSA9IGVuZC5sZW5ndGggPT09IDUgPyBlbmQgKyAnOjAwJyA6IGVuZDtcclxuICAgICAgaWYgKGlzX3JlY3VycmluZyAhPSBudWxsKSBwYXlsb2FkLmlzX3JlY3VycmluZyA9IGlzX3JlY3VycmluZztcclxuICAgICAgaWYgKGRheV9vZl93ZWVrICE9IG51bGwpIHBheWxvYWQuZGF5X29mX3dlZWsgPSBkYXlfb2Zfd2VlaztcclxuICAgICAgaWYgKHJlY3VycmVuY2VfaW50ZXJ2YWwgIT0gbnVsbCkgcGF5bG9hZC5yZWN1cnJlbmNlX2ludGVydmFsID0gcmVjdXJyZW5jZV9pbnRlcnZhbDtcclxuICAgICAgaWYgKHJlY3VycmVuY2VfZW5kX2RhdGUgIT09IHVuZGVmaW5lZCkgcGF5bG9hZC5yZWN1cnJlbmNlX2VuZF9kYXRlID0gcmVjdXJyZW5jZV9lbmRfZGF0ZSB8fCBudWxsO1xyXG5cclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnc2NoZWR1bGVfZXZlbnRzJylcclxuICAgICAgICAudXBkYXRlKHBheWxvYWQpXHJcbiAgICAgICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc2NoZWR1bGUgZXZlbnQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBhc3luYyBkZWxldGVTY2hlZHVsZUV2ZW50KGlkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdzY2hlZHVsZV9ldmVudHMnKS5kZWxldGUoKS5lcSgnaWQnLCBpZCk7XHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgc2NoZWR1bGUgZXZlbnQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG59OyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJkYXRhU2VydmljZSIsImdldFJldmlld3MiLCJjb3VudCIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImxpbWl0IiwiY29uc29sZSIsImdldFF1b3RlcyIsImdldFVzZXJQcm9maWxlIiwidXNlcklkIiwic2luZ2xlIiwiZ2V0U2NoZWR1bGVBY2Nlc3MiLCJoYXNfc2NoZWR1bGVfYWNjZXNzIiwidXBzZXJ0Q2xpZW50IiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJ1cHNlcnQiLCJhdXRoX3VzZXJfaWQiLCJ1cGRhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib25Db25mbGljdCIsImdldFNjaGVkdWxlRXZlbnRzIiwidXNlckVtYWlsIiwiYmFzZVNlbGVjdCIsInF1ZXJ5Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJjb2RlIiwiZmFsbGJhY2tTZWxlY3QiLCJmYWxsYmFjayIsImNyZWF0ZVNjaGVkdWxlRXZlbnQiLCJ0aXRsZSIsImRhdGUiLCJzdGFydCIsImVuZCIsImNhdCIsInVzZXJfZW1haWwiLCJpc19yZWN1cnJpbmciLCJkYXlfb2Zfd2VlayIsInJlY3VycmVuY2VfaW50ZXJ2YWwiLCJyb3ciLCJjYXRlZ29yeSIsInN0YXJ0X3RpbWUiLCJsZW5ndGgiLCJlbmRfdGltZSIsIk51bWJlciIsInJlc3VsdCIsImluc2VydCIsInVuZGVmaW5lZCIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwidXBkYXRlU2NoZWR1bGVFdmVudCIsInJlY3VycmVuY2VfZW5kX2RhdGUiLCJwYXlsb2FkIiwidXBkYXRlIiwiZGVsZXRlU2NoZWR1bGVFdmVudCIsImRlbGV0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/lib/supabase.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/pages/_app.js":
/*!***************************!*\
  !*** ./src/pages/_app.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/auth */ \"(pages-dir-node)/./src/lib/auth.js\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/globals.css */ \"(pages-dir-node)/./src/styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction App({ Component, pageProps }) {\n    const [theme, setTheme] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('light');\n    const context = {\n        theme,\n        setTheme,\n        siteTitle: process.env.NEXT_PUBLIC_SITE_TITLE || \"Greg Tutors\"\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.Authenticator, {\n        context: context,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n            ...pageProps\n        }, void 0, false, {\n            fileName: \"C:\\\\Cursor Coding\\\\Tutoring Web Application\\\\gregtutors\\\\src\\\\pages\\\\_app.js\",\n            lineNumber: 11,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Cursor Coding\\\\Tutoring Web Application\\\\gregtutors\\\\src\\\\pages\\\\_app.js\",\n        lineNumber: 10,\n        columnNumber: 5\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (App);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9wYWdlcy9fYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNXO0FBQ2I7QUFFL0IsU0FBU0UsSUFBSSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRTtJQUNuQyxNQUFNLENBQUNDLE9BQU9DLFNBQVMsR0FBR04sK0NBQVFBLENBQUM7SUFDbkMsTUFBTU8sVUFBVTtRQUFFRjtRQUFPQztRQUFVRSxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLHNCQUFzQixJQUFJO0lBQWM7SUFFbEcscUJBQ0UsOERBQUNWLG9EQUFhQTtRQUFDTSxTQUFTQTtrQkFDdEIsNEVBQUNKO1lBQVcsR0FBR0MsU0FBUzs7Ozs7Ozs7Ozs7QUFHOUI7QUFFQSxpRUFBZUYsR0FBR0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXEN1cnNvciBDb2RpbmdcXFR1dG9yaW5nIFdlYiBBcHBsaWNhdGlvblxcZ3JlZ3R1dG9yc1xcc3JjXFxwYWdlc1xcX2FwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQXV0aGVudGljYXRvciB9IGZyb20gJy4uL2xpYi9hdXRoJztcclxuaW1wb3J0ICcuLi9zdHlsZXMvZ2xvYmFscy5jc3MnO1xyXG5cclxuZnVuY3Rpb24gQXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMgfSkge1xyXG4gIGNvbnN0IFt0aGVtZSwgc2V0VGhlbWVdID0gdXNlU3RhdGUoJ2xpZ2h0Jyk7XHJcbiAgY29uc3QgY29udGV4dCA9IHsgdGhlbWUsIHNldFRoZW1lLCBzaXRlVGl0bGU6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJVEVfVElUTEUgfHwgXCJHcmVnIFR1dG9yc1wiIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8QXV0aGVudGljYXRvciBjb250ZXh0PXtjb250ZXh0fT5cclxuICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxyXG4gICAgPC9BdXRoZW50aWNhdG9yPlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwcDtcclxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwiQXV0aGVudGljYXRvciIsIkFwcCIsIkNvbXBvbmVudCIsInBhZ2VQcm9wcyIsInRoZW1lIiwic2V0VGhlbWUiLCJjb250ZXh0Iiwic2l0ZVRpdGxlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NJVEVfVElUTEUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/pages/_app.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/styles/globals.css":
/*!********************************!*\
  !*** ./src/styles/globals.css ***!
  \********************************/
/***/ (() => {



/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("(pages-dir-node)/./src/pages/_app.js")));
module.exports = __webpack_exports__;

})();